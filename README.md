# Web App

## PG SSL MODE

在 PostgresSQL 的连接字符串（DSN）中，`sslmode` 参数用于指定客户端与服务器之间的 SSL/TLS 连接模式。`sslmode`
有几种不同的选项，每种选项对应不同的安全要求。以下是 `sslmode` 的几种常见模式：

### 1. `disable`

- **说明**: 禁用 SSL 连接。
- **用途**: 仅用于在不需要任何加密的情况下连接服务器。

### 2. `allow`

- **说明**: 首先尝试不使用 SSL 连接；如果服务器要求 SSL，客户端将尝试使用 SSL 连接。
- **用途**: 用于兼容性较低的环境，但如果可以的话，也会使用 SSL。

### 3. `prefer`

- **说明**: 首先尝试使用 SSL 连接；如果服务器不支持 SSL，客户端将回退到不使用 SSL。
- **用途**: 大多数情况下是默认设置，在可能的情况下使用 SSL，但不会强制。

### 4. `require`

- **说明**: 强制使用 SSL 连接；如果服务器不支持 SSL，连接将失败。
- **用途**: 用于需要加密连接的环境，但不验证服务器证书的真实性。

### 5. `verify-ca`

- **说明**: 强制使用 SSL，并验证服务器的 CA 证书。
- **用途**: 用于需要加密连接，并且要确保连接到受信任的服务器的环境。但不会验证服务器的主机名。

### 6. `verify-full`

- **说明**: 强制使用 SSL，并验证服务器的 CA 证书和主机名。
- **用途**: 用于需要最强安全性的环境，确保连接到的服务器不仅是受信任的，而且主机名与证书一致。

### 选项总结

| 模式            | 加密 (SSL) | 验证服务器证书 | 验证服务器主机名 |
|---------------|----------|---------|----------|
| `disable`     | 否        | 否       | 否        |
| `allow`       | 可选       | 否       | 否        |
| `prefer`      | 可选       | 否       | 否        |
| `require`     | 是        | 否       | 否        |
| `verify-ca`   | 是        | 是       | 否        |
| `verify-full` | 是        | 是       | 是        |

### 选择 `sslmode` 的建议

- **`disable`**: 如果你处在一个完全受信的内部网络中，并且不需要加密。
- **`require`**: 如果你需要加密数据传输，但不需要对服务器进行严格的验证。
- **`verify-full`**: 如果你在公共网络中，并且需要最高级别的安全性和对服务器身份的确认。